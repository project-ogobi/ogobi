<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{template}">


<div layout:fragment="content" class="container">
    <h1 class="font-semibold p-3 text-center text-lg">인기글</h1>

    <!--   카드 시작 -->
    <div class="carousel w-full h-48">
        <div th:id="${'item' + i}" class="carousel-item w-full flex justify-center" th:each="post, i: ${bestPosts}">
            <div class="bg-indigo-200 rounded-lg w-5/6 h-5/6 p-4 flex-col flex">
                <div class="font-semibold text-2xl mb-4" th:text="${post.subject}">제목</div>
                <span class="h-16"
                      th:utext="${#strings.length(post.content) &gt; 90 ? #strings.substring(post.content, 0, 90) + '...' : post.content}">내용</span>
                <div class="items-end justify-end text-right"><a
                        th:href="@{/posts/{category}/detail/{id}(id=${post.id}, category=${post.category})}">보러가기>></a>
                </div>
            </div>
        </div>
    </div>
    <!--   카드 끝 -->

    <!--   번호 -->
    <div class="flex w-full gap-2 justify-center items-center">
        <div class="flex-col" th:each="post, i : ${bestPosts}">
            <a th:href="${'#item' + i}" class="btn btn-xs btn-primary" th:text="${i.count}">index</a>
        </div>
    </div>

    <!-- 선 추가 -->
    <hr class="my-5 border-gray-300">
    <h1 class="font-semibold text-center text-lg mb-3">최근 게시글</h1>
    <table class="table w-full table-auto mx-auto mb-5">
        <thead>
        <tr style="text-align: center">
            <th class="text-base">게시판</th>
            <th class="text-base">제목</th>
            <th class="text-base">작성자</th>
            <th class="text-base">작성일시</th>
        </tr>
        </thead>
        <tbody>
        <tr class="hover" style="text-align: center" th:each="post : ${resentPostList}">
            <td class="font-semibold" th:text="${post.getCategory().toString().toLowerCase() eq 'free' ? '자유' : '공유'}"></td>
            <td style="text-align: start">
                <a th:href="@{|/posts/${post.getCategory().toString().toLowerCase()}/detail/${post.id}|}" th:text="${post.subject}"/>
                <span class="font-semibold text-indigo-500 text-xs ml-2" th:if="${#lists.size(post.comments) > 0}" th:text="${#lists.size(post.comments)}"></span>
            </td>
            <td style="text-align: center;">
                <span th:if="${post.author != null}" th:text="${post.author.nickname}"/>
            </td>
            <td style="text-align: center;" th:text="${#temporals.format(post.createDate, 'yyyy-MM-dd HH:mm')}"></td>
        </tr>
        </tbody>
    </table>
</div>
